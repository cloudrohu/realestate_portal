{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>{{ active.project_name }} | {{ rs.title }}</title> 
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="keywords" content="{{ rs.keywords }}">
<link rel="icon" href="{{ rs.icon.url }}" sizes="16x16">
<meta name="description" content="{{ rs.description }}">

<!-- CSS and JS CDN links -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.css">
<link rel="stylesheet" href="{% static 'projects/assets/css/style.css' %}">
</head>

<body>

<!-- ========== ðŸ™ï¸ SLIDER SECTION ========== -->
<section id="home">
  <div class="container-fluid">
    <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
      <div class="carousel-indicators">
        {% for i in active.sliders.all %}
          <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="{{ forloop.counter0 }}" class="{% if forloop.first %}active{% endif %}" aria-current="true"></button>
        {% endfor %}
      </div>

      <div class="carousel-inner">
        {% for i in active.sliders.all %}
          <div class="carousel-item {% if forloop.first %}active{% endif %}">
            {% if i.image %}
              <img src="{{ i.image.url }}" style="height: 650px; width: 100%;" class="d-block w-100 mobile-img" alt="{{ active.project_name }}">
            {% else %}
              <img src="{% static 'projects/assets/images/default-placeholder.webp' %}" style="height: 650px; width: 100%;" class="d-block w-100 mobile-img" alt="No image available">
            {% endif %}
          </div>
        {% endfor %}
      </div>

      <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
  </div>
</section>

<!-- ========== ðŸ—ï¸ OVERVIEW SECTION ========== -->
<section class="sec1" id="about_us">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-xl-7 col-lg-7 col-sm-12">
        <div class="overview-data">
          <h1>Welcome To {{ active.project_name }}</h1>
          {% for welcome in active.welcomes.all %}
            <p>{{ welcome.description }}</p>
            {% if welcome.read_more %}
              <p class="overview-info">
                <span class="moreText" style="display: none;">
                  {{ welcome.read_more }}
                </span>
              </p>
              <button class="readMoreBtn custom-btn" onclick="toggleReadMore(this)">Read More</button>
            {% endif %}
          {% empty %}
            <p>No description available.</p>
          {% endfor %}
          <br><br>
          <button id="request-brochure-button" type="button" class="custom-btn data-id-btn on-rera"
            data-bs-target="#enquire-modal" data-bs-toggle="modal"
            data-bs-whatever="Enquire Now" data-id="Brochure">
            <i class="fa-solid fa-download"></i>&nbsp;&nbsp;Request Brochure
          </button>
        </div>
      </div>

      <!-- âœ… Safe image handling -->
      <div class="col-xl-5 col-lg-5 col-sm-12 text-center ps-0 pe-0">
        {% if active.image %}
          <img src="{{ active.image.url }}" width="100%" class="data-id-btn" data-id="Project Video" alt="{{ active.project_name }}">
        {% else %}
          <img src="{% static 'projects/assets/images/default-placeholder.webp' %}" width="100%" alt="No image available">
        {% endif %}
      </div>
    </div>
  </div>
</section>

<!-- ========== ðŸ–¼ï¸ GALLERY SECTION ========== -->
<section class="sec2" id="gallery">
  <div class="container wow fadeInUp">
    <h1 class="section-title">Project Gallery</h1>
    <div class="content-gallery">
      <div class="gallery js-gallery">
        {% for img in active.gallery.all %}
          <div class="gallery-item">
            <div class="gallery-img-holder js-gallery-popup">
              {% if img.image %}
                <img src="{{ img.image.url }}" style="height: 175px;" alt="{{ active.project_name }}" class="gallery-img">
              {% else %}
                <img src="{% static 'projects/assets/images/default-placeholder.webp' %}" style="height: 175px;" alt="No image available" class="gallery-img">
              {% endif %}
            </div>
          </div>
        {% empty %}
          <p>No images available in gallery.</p>
        {% endfor %}
      </div>
    </div>
  </div>
</section>

<!-- ========== ðŸ  AMENITIES SECTION ========== -->
<section class="sec1" id="amenities">
  <div class="container">
    <h1 class="section-title on-rera">Luxurious Amenities</h1>
    <div id="slick1" class="row">
      {% for amenity in active.amenities.all %}
        <div class="col-md-3 text-center">
          {% if amenity.amenities.icon %}
            <img src="{{ amenity.amenities.icon.url }}" style="height: 120px;" alt="{{ amenity.amenities.title }}">
          {% else %}
            <img src="{% static 'projects/assets/images/default-placeholder.webp' %}" style="height: 120px;" alt="No image available">
          {% endif %}
          <p class="mt-2">{{ amenity.amenities.title }}</p>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- ========== ðŸ“œ RERA INFO SECTION ========== -->
<section class="sec1" id="rera-info">
  <div class="container">
    {% for rera in active.rera.all %}
      <h1 class="section-title">RERA Information</h1>
      <div class="rera-box d-flex align-items-center gap-3 mb-3">
        {% if rera.qr_image %}
          <img src="{{ rera.qr_image.url }}" loading="lazy" style="height:100px;" alt="RERA QR">
        {% else %}
          <img src="{% static 'projects/assets/images/default-placeholder.webp' %}" loading="lazy" style="height:100px;" alt="No QR Available">
        {% endif %}
        <div>
          <p>{{ active.project_name }} â€” <b>{{ rera.registration_no }}</b></p>
          <p>{{ rera.details }}</p>
        </div>
      </div>
    {% empty %}
      <p>No RERA information available.</p>
    {% endfor %}
  </div>
</section>

<!-- ========== JS ========== -->
<script>
function toggleReadMore(btn) {
  const moreText = btn.previousElementSibling.querySelector(".moreText");
  if (moreText.style.display === "inline" || moreText.style.display === "") {
    moreText.style.display = "none";
    btn.textContent = "Read More";
  } else {
    moreText.style.display = "inline";
    btn.textContent = "Read Less";
  }
}
</script>

</body>
</html>
